{"version":3,"sources":["cmps/ProductFilter.jsx","hooks/UseForm.js","cmps/ProductPreview.jsx","cmps/ProductList.jsx","services/async-storage-service.js","services/product-service.js","store/actions/product-action.js","pages/ProductApp.jsx","cmps/AppHeader.jsx","pages/Home.jsx","App.js","reportWebVitals.js","store/reducers/product-reducer.js","store/index.js","index.js"],"names":["ProductFilter","stores","priceFilters","initialState","cb","useState","fields","setFields","useEffect","handleChange","target","name","value","prevFields","UseForm","storeId","maxPrice","gender","onChangeFilter","filterBy","className","onChange","defaultValue","hidden","disabled","map","store","StoreId","StoreName","priceFilter","Value","DisplayText","ProductPreview","product","altsCountRef","useRef","src","ProductImage","alt","ProductTitle","onError","current","RegularStoreLogo","StoreLogo","PriceLabel","ProductList","products","length","ProductId","storageService","query","get","entityType","fieldIdName","entityId","then","entities","find","entity","post","newEntity","_id","_makeId","push","_save","postMany","newEntities","put","updatedEntity","idx","findIndex","splice","remove","Error","delay","JSON","parse","localStorage","getItem","Promise","resolve","setTimeout","setItem","stringify","text","possible","i","charAt","Math","floor","random","STORE_KEY","FIELD_ID_NAME","data","require","defaultStores","Stores","PriceFilter","productService","getStores","getStoreByStoreId","getProducts","getPriceFilters","a","selectedStore","Products","_getAllProducts","filter","Price","ProductTags","includes","reduce","acc","prods","concat","loadProducts","dispatch","getState","productModule","type","console","dir","ProductApp","useSelector","state","useDispatch","setFilterBy","AppHeader","history","useHistory","onClick","activeClassName","exact","to","Home","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","INITIAL_STATE","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","action","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.76abe3cd.chunk.js","sourcesContent":["import { UseForm } from \"../hooks/UseForm\";\r\n\r\nexport function ProductFilter({ stores, priceFilters, onChangeFilter }) {\r\n  const [filterBy, handleChange] = UseForm(\r\n    {\r\n      storeId: null,\r\n      maxPrice: null,\r\n      gender:null\r\n    },\r\n    onChangeFilter\r\n  );\r\n  return (\r\n    <section className=\"product-filter\">\r\n      <h2 className=\"title\">Filter products:</h2>\r\n        <select\r\n          name=\"storeId\"\r\n          onChange={handleChange}\r\n          defaultValue=\"All\"\r\n      >\r\n        <option value=\"All\" hidden={true} disabled={true} >Select a Store</option>\r\n          <option value=\"\">All</option>\r\n          {stores.map((store) => {\r\n            return (\r\n              <option\r\n                defaultValue={filterBy.storeId}\r\n                key={store.StoreId}\r\n                value={store.StoreId}\r\n              >\r\n                {store.StoreName}\r\n              </option>\r\n            );\r\n          })}\r\n        </select>\r\n      <select name=\"gender\"  defaultValue=\"gender\" onChange={handleChange}  >\r\n        <option value=\"gender\" disabled={ true } hidden={ true }>Gender</option>\r\n        <option value=\"3\">Him</option>\r\n        <option value=\"4\">Her</option>\r\n        <option value=\"\">Both</option>\r\n      </select>\r\n      <select name=\"maxPrice\" defaultValue=\"Budget\"   onChange={handleChange}>\r\n        <option value=\"Budget\" disabled={true} hidden={true}>\r\n          Budget\r\n        </option>\r\n        {priceFilters.map((priceFilter) => (\r\n          <option key={priceFilter.Value} value={+priceFilter.Value}>\r\n            {priceFilter.DisplayText}\r\n          </option>\r\n        ))}\r\n        <option value=\"\">All</option>\r\n      </select>\r\n    </section>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react'\r\n\r\nexport const UseForm = (initialState, cb = () => { }, /*debounceTime - cool idea! */) => {\r\n  const [fields, setFields] = useState(initialState)\r\n\r\n  useEffect(() => {\r\n    cb(fields)\r\n    // eslint-disable-next-line\r\n  }, [fields])\r\n\r\n  const handleChange = ({ target }) => {\r\n    var name = target.name\r\n    var value = +target.value;\r\n    setFields(prevFields => ({ ...prevFields, [name]: value }))\r\n  }\r\n\r\n  return [\r\n    fields,\r\n    handleChange,\r\n    setFields\r\n  ]\r\n}","import React, { useRef } from 'react'\r\n\r\nexport function ProductPreview({ product }) {\r\n//   if(product.ProductId===206258)console.log(product);\r\n    const altsCountRef = useRef(0);\r\n    const onError = ({ target }) => {\r\n        altsCountRef.current++;\r\n        if (altsCountRef.current>1)\r\n            target.src = product.store.RegularStoreLogo;\r\n            \r\n        else target.src = product.store.StoreLogo;\r\n    }\r\n    return (\r\n        <article className=\"product-preview\">\r\n            <img src={ product.ProductImage } alt={ product.ProductTitle } onError={onError} />\r\n            <h3>{ product.store.StoreName }</h3>\r\n            <h3>{ product.ProductTitle }</h3>\r\n            <h3>{product.PriceLabel }</h3>\r\n        </article>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport {ProductPreview} from './ProductPreview';\r\n\r\nexport function ProductList({ products }) {\r\n    if(!products?.length)return <h2 className=\"title\">No products found!</h2>\r\n    return (\r\n        <ul className=\"product-list\">\r\n            {\r\n                products.map(product => {\r\n                  return(<li key={product.ProductId}>\r\n                        <ProductPreview product={product} />\r\n                    </li>\r\n                  )\r\n                })\r\n           }\r\n        </ul>\r\n    )\r\n}\r\n","export const storageService = {\r\n  query,\r\n  get,\r\n  post,\r\n  postMany,\r\n  put,\r\n  remove,\r\n}\r\n\r\nfunction query(entityType, delay = 0) {\r\n  var entities = JSON.parse(localStorage.getItem(entityType)) || []\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve(entities)\r\n    }, delay)\r\n  })\r\n}\r\n\r\nfunction get(entityType,fieldIdName, entityId) {\r\n  return query(entityType)\r\n    .then(entities => entities.find(entity => {\r\n      return entity[fieldIdName] === entityId\r\n    }))\r\n}\r\n\r\nfunction post(entityType, newEntity) {\r\n  newEntity._id = _makeId()\r\n  return query(entityType)\r\n    .then(entities => {\r\n      entities.push(newEntity)\r\n      _save(entityType, entities)\r\n      return newEntity\r\n    })\r\n}\r\n\r\nfunction postMany(entityType, newEntities) {\r\n  return query(entityType)\r\n    .then(entities => {\r\n      entities.push(...newEntities);\r\n      _save(entityType, entities)\r\n      return entities;\r\n    })\r\n}\r\n\r\nfunction put(entityType, updatedEntity) {\r\n  return query(entityType)\r\n    .then(entities => {\r\n      const idx = entities.findIndex(entity => entity._id === updatedEntity._id)\r\n      entities.splice(idx, 1, updatedEntity)\r\n      _save(entityType, entities)\r\n      return updatedEntity\r\n    })\r\n}\r\n\r\nfunction remove(entityType, entityId) {\r\n  return query(entityType)\r\n    .then(entities => {\r\n      const idx = entities.findIndex(entity => entity._id === entityId)\r\n      if (idx < 0) throw new Error(`Unknown Entity ${entityId}`)\r\n      entities.splice(idx, 1)\r\n      _save(entityType, entities)\r\n    })\r\n}\r\n\r\n\r\nfunction _save(entityType, entities) {\r\n  localStorage.setItem(entityType, JSON.stringify(entities))\r\n}\r\n\r\nfunction _makeId(length = 5) {\r\n  var text = ''\r\n  var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\r\n  for (var i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length))\r\n  }\r\n  return text\r\n}","import { storageService } from './async-storage-service';\r\n\r\nconst STORE_KEY = 'storeDb';\r\nconst FIELD_ID_NAME = 'StoreId';\r\nconst data = require('./data/products.json');\r\nconst defaultStores = data.Stores;\r\nconst priceFilters = data.PriceFilter;\r\nexport const productService = {\r\n    getStores,\r\n    getStoreByStoreId,\r\n    getProducts,\r\n    getPriceFilters\r\n}\r\n\r\nasync function getStores() {\r\n    let stores = await storageService.query(STORE_KEY);\r\n    if (!stores.length) {\r\n        stores = [...defaultStores];\r\n        storageService.postMany(STORE_KEY, stores);\r\n    }\r\n    return stores;\r\n}\r\n\r\nasync function getStoreByStoreId(storeId) {\r\n    return await storageService.get(STORE_KEY, FIELD_ID_NAME, storeId);\r\n}\r\n\r\nasync function getProducts(filterBy) {\r\n    let products;\r\n    if (filterBy.storeId) {\r\n        const selectedStore = await getStoreByStoreId(filterBy.storeId);\r\n        if (!selectedStore) return null;\r\n         products= selectedStore.Products.map(product => {\r\n            return {\r\n                ...product,\r\n                store: { ...selectedStore }\r\n            };\r\n        })\r\n    }\r\n    if (!products) products =await _getAllProducts();\r\n    if (filterBy.maxPrice) {\r\n        products= products.filter(product => product.Price <= filterBy.maxPrice);\r\n    }\r\n    if (filterBy.gender) {\r\n        products= products.filter(product => product.ProductTags.includes(filterBy.gender));\r\n    }\r\n    return products;\r\n}\r\nfunction getPriceFilters() {\r\n    return priceFilters;\r\n}\r\n\r\nasync function _getAllProducts() {\r\n    const stores = await getStores();\r\n    const products = stores.reduce((acc, store) => {\r\n        const prods = store.Products.map(product => {\r\n            return {\r\n                ...product,\r\n                store: { ...store }\r\n            };\r\n        });\r\n        return acc.concat(prods);\r\n    }, [])\r\n    return products;\r\n}\r\n","\r\nimport { productService } from '../../services/product-service';\r\n\r\nexport function loadStores() {\r\n    return async dispatch => {\r\n        try {\r\n            const stores = await productService.getStores();\r\n            dispatch({ type: 'SET_STORES', stores });\r\n        } catch (err) {\r\n            console.dir(err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function getStoreByStoreId() {\r\n    return async(dispatch, getState) => {\r\n        const { filterBy } = getState().productModule;\r\n        const selectedStore = await productService.getStoreByStoreId(filterBy.storeId);\r\n        dispatch({ type: 'SET_STORE', store: selectedStore });\r\n    }\r\n}\r\n\r\nexport function loadProducts() {\r\n    return async (dispatch,getState) => {\r\n        try {\r\n            const { filterBy } = getState().productModule;\r\n            const products = await productService.getProducts(filterBy);\r\n            dispatch({ type: 'SET_PRODUCTS',products });\r\n        } catch (err) {\r\n            console.dir(err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function setPriceFilters() {\r\n    return dispatch => {\r\n        const priceFilters = productService.getPriceFilters();\r\n        dispatch({type:'SET_PRICE_FILTERS',priceFilters});\r\n    }\r\n}\r\n\r\n\r\nexport function setFilterBy(filterBy) {\r\n    return dispatch => {\r\n      dispatch({ type: 'SET_FILTER_BY', filterBy })\r\n    }\r\n}","import { ProductFilter } from '../cmps/ProductFilter';\r\nimport { ProductList } from '../cmps/ProductList';\r\nimport { useEffect } from 'react';\r\nimport { loadProducts, loadStores, getStoreByStoreId, setPriceFilters, setFilterBy } from '../store/actions/product-action';\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from 'react-redux';\r\nexport function ProductApp() {\r\n      const { selectedStore, stores, products, priceFilters } = useSelector(state => state.productModule);\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(loadStores());\r\n   \r\n    dispatch(loadProducts());\r\n    dispatch(setPriceFilters());\r\n\r\n    // eslint-disable-next-line\r\n  }, [])\r\n  const onChangeFilter = filterBy => {\r\n    if (filterBy.storeId) {\r\n      filterBy.storeId = +filterBy.storeId;\r\n    }\r\n    dispatch(setFilterBy(filterBy));\r\n     dispatch(getStoreByStoreId());\r\n    dispatch(loadProducts());\r\n  }\r\n  if (!products) return <h2 className=\"title\">Loading products</h2>\r\n    return (\r\n        <section className=\"product-app\">\r\n            <h1 className=\"title\">Product Catalog</h1>\r\n      <ProductFilter stores={stores} priceFilters={priceFilters} onChangeFilter={onChangeFilter} />\r\n      <h2 className=\"title\" >Showing products of {selectedStore?.StoreName || 'All' }:</h2>\r\n    <ProductList products={products} />\r\n        </section>\r\n    )\r\n}\r\n","import {\r\n  NavLink,\r\n  useHistory,\r\n  useParams,\r\n} from \"react-router-dom\";\r\nexport function AppHeader() {\r\n    const history = useHistory();\r\n    const goHome = () => {\r\n        history.push('/');\r\n    }\r\n  return (\r\n    <header className=\"app-header\">\r\n      <div className=\"logo\" onClick={goHome} > \r\n      PRODUCT CATALOG\r\n      </div>\r\n      <nav className=\"app-nav\">\r\n        <NavLink activeClassName=\"active-nav\" exact to=\"/\">\r\n          Home\r\n        </NavLink>\r\n        <NavLink activeClassName=\"active-nav\" to=\"/products\">\r\n          Products\r\n        </NavLink>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n","\r\nexport  function Home() {\r\n    return (\r\n        <section className=\"home\">\r\n            <h1 className=\"title\">Welcome home!</h1>\r\n\r\n        </section>\r\n    )\r\n}\r\n","import './styles/main.scss';\nimport { HashRouter as Router, Redirect, Route, Switch } from 'react-router-dom';\nimport { ProductApp } from './pages/ProductApp';\nimport { AppHeader } from './cmps/AppHeader';\nimport { Home } from './pages/Home';\nfunction App() {\n\n  return (\n    <Router>\n      <AppHeader />\n      <main className=\"app layout\">\n        <Switch>\n          <Route path=\"/products\" component={ProductApp} />\n          <Route path=\"/\" component={ Home } />\n    \n        </Switch>\n      </main>\n    </Router>\n\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const INITIAL_STATE = {\r\n    stores: null,\r\n    selectedStore:null,\r\n    products: null,\r\n    priceFilters:null,\r\n    filterBy: {\r\n        storeId:null\r\n    }\r\n}\r\n\r\nexport function productReducer(state = INITIAL_STATE, action) {\r\n    switch (action.type) {\r\n        case 'SET_STORES':\r\n            return {\r\n                ...state,\r\n                stores:action.stores\r\n            }\r\n        case 'SET_STORE':\r\n            return {\r\n                ...state,\r\n                selectedStore: action.store\r\n            }\r\n        case 'SET_PRODUCTS':\r\n            return {\r\n                ...state,\r\n                products:action.products\r\n            }\r\n        case 'SET_PRICE_FILTERS':\r\n            return {\r\n                ...state,\r\n                priceFilters:action.priceFilters\r\n            }\r\n        case 'SET_FILTER_BY':\r\n            return {\r\n                ...state,\r\n                filterBy:action.filterBy\r\n            }\r\n    \r\n        default:\r\n            return state;\r\n    }\r\n}","import { applyMiddleware, combineReducers, compose, createStore } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { productReducer } from './reducers/product-reducer';\r\n\r\n\r\n// Connecting redux devtools\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n// Combining reducers into one\r\nconst rootReducer = combineReducers({\r\n    productModule: productReducer,\r\n})\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport { store} from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n    <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}